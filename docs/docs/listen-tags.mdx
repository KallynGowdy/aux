---
id: listen-tags
title: Listen Tags
sidebar_label: Listen Tags
description: Listen tags are tags that can receive shouts and whispers from other bots and actoins that happen from the user.
---

import { 
  Badges,
  Badge,
  ReadOnlyBadge,
  VideoBadge,
  PossibleValuesTable,
  PossibleValueCode,
  PossibleValue,
  LabelAnchorValues,
  AnyColorValues,
  Alert,
  TagLink,
  NormalCode,
  UserBotBadge,
  ActionLink,
} from './components.mdx';

Listen tags are tags that can receive shouts and whispers from other bots and actions that happen from the user.
To create a listen tag, you make a normal tag and enter a "@" as the first character of the tag's value.

## Whisper Tags

Whispers are shouts that are sent to specific bots instead of all bots.

### `@onCreate`

A whisper that is sent to a bot when it is first created.

### `@onDestroy`

A whisper that is sent to a bot when it is being destroyed.

### `@onModDrop`

A whisper that is sent to a bot that a mod was dropped on.
If a custom `@onModDrop` is not specified, then the mod will be applied automatically.
If a custom `@onModDrop` is specified, then the mod needs to be applied manually via <ActionLink action='applyMod(bot, ...mods)'/>.

#### Arguments:
```typescript

interface Mod {
  [tag: string]: any;
}

let that: {
  mod: Mod
};
```

### `@onModDropEnter`

A whisper that is sent to the bot that a mod started to be dragged onto.

#### Arguments:
```typescript
let that: {
  mod: Mod,
  dimension: string
};
```

### `@onModDropExit`

A whisper that is sent to the bot that a mod was just dragged off of.

#### Arguments:
```typescript
let that: {
  mod: Mod,
  dimension: string
};
```

### `@onClick`

A whisper that is sent to the bot that was clicked.

#### Arguments:
```typescript
let that: {
  face: 'left' | 'right' | 'front' | 'back' | 'top' | 'bottom',
  dimension: string
};
```

### `@onPointerEnter`

A whisper that is sent to a bot when the mouse cursor starts to hover over it.

#### Arguments:
```typescript
let that: {
  bot: Bot,
  dimension: string
};
```

### `@onPointerExit`

A whisper that is sent to a bot when the mouse cursor stops hovering over it.

#### Arguments:
```typescript
let that: {
  bot: Bot,
  dimension: string
};
```

### `@onPointerDown`

A whipser that is sent to a bot when the user starts clicking it.

#### Arguments:
```typescript
let that: {
  bot: Bot,
  dimension: string
};
```

### `@onPointerUp`

A whisper that is sent to a bot when the user stops clicking it.

#### Arguments:
```typescript
let that: {
  bot: Bot,
  dimension: string
};
```

### `@onDrag`

A whisper that is sent whenever a bot is starting to be dragged.

#### Arguments:
```typescript
let that: {
  bot: Bot,
  face: 'left' | 'right' | 'front' | 'back' | 'top' | 'bottom',
  from: {
    x: number,
    y: number,
    dimension: string
  }
};
```

### `@onDrop`

A whisper that is sent whenever a bot has been dropped after being dragged.
The whisper is sent to both the bot that was dropped and the bot that was dropped on.

#### Arguments
```typescript
let that: {
  dragBot: Bot,
  to: {
    bot: Bot,
    x: number,
    y: number,
    dimension: string
  },
  from: {
    x: number,
    y: number,
    dimension: string
  }
};
```

### `@onDropEnter`

A whisper that is sent to both bots when a bot is dragged onto another bot.

#### Arguments
```typescript
let that: {
  dragBot: Bot,
  to: {
    bot: Bot,
    x: number,
    y: number,
    dimension: string
  },
  from: {
    x: number,
    y: number,
    dimension: string
  }
};
```

### `@onDropExit`

A whisper that is sent to both bots when a bot is dragged off of another bot.

#### Arguments
```typescript
let that: {
  dragBot: Bot,
  to: {
    bot: Bot,
    x: number,
    y: number,
    dimension: string
  },
  from: {
    x: number,
    y: number,
    dimension: string
  }
};
```

### `@onSaveInput`

A whisper that is sent when the input box for a bot has been changed by the user.

#### Arguments:
```typescript
let that = null;
```

### `@onCloseInput`

A whisper that is sent when the input box for a bot has been closed by the user.

#### Arguments:
```typescript
let that = null;
```

### `@onListen`

A whisper that is sent whenever a whisper or shout is sent to this bot.

#### Arguments:
```typescript
let that: {
  name: string,
  that: any,
  targets: Bot[],
  listeners: Bot[],
  responses: any[]
};
```

### `@onMaxLODEnter`

A whisper that is sent whenever a bot enters its maximum Level-Of-Detail.

#### Arguments:
```typescript
let that: {
  bot: Bot,
  dimension: string
};
```

### `@onMinLODEnter`

A whisper that is sent whenever a bot enters its minimum Level-Of-Detail.

#### Arguments:
```typescript
let that: {
  bot: Bot,
  dimension: string
};
```

### `@onMaxLODExit`

A whisper that is sent whenever a bot exits its maximum Level-Of-Detail.

#### Arguments:
```typescript
let that: {
  bot: Bot,
  dimension: string
};
```

### `@onMinLODExit`

A whisper that is sent whenever a bot exits its minimum Level-Of-Detail.

#### Arguments:
```typescript
let that: {
  bot: Bot,
  dimension: string
};
```

### `@onFocusEnter`

A whisper that is sent whenever a bot starts being focused by the player.

Focus is when the bot is in the center of the screen.

Only sent if <TagLink tag='auxFocusable'/> is true.

#### Arguments:
```typescript
let that: {
  bot: Bot,
  dimension: string
};
```

### `@onFocusExit`

A whisper that is sent whenever a bot stops being focused by the player.

Focus is when the bot is in the center of the screen.

#### Arguments:
```typescript
let that: {
  bot: Bot,
  dimension: string
};
```

### `@[groupName][stateName]OnEnter`

A whisper that is sent whenever the `[groupName]` tag is set to `[stateName]` via the <ActionLink action='changeState(bot, stateName, groupName?)'/> function.

#### Arguments:
```typescript
let that: {
  /**
   * The stateName that the bot is coming from.
   */
  from: string,

  /**
   * The stateName that the bot is going to.
   */
  to: string,
};
```

### `@[groupName][stateName]OnExit`

A whisper that is sent whenever the `[groupName]` tag is changed from `[stateName]` via the <ActionLink action='changeState(bot, stateName, groupName?)'/> function.

#### Arguments:
```typescript
let that: {
  /**
   * The stateName that the bot is coming from.
   */
  from: string,

  /**
   * The stateName that the bot is going to.
   */
  to: string,
};
```

## Shout Tags

Shouts are events which are sent to all bots.

### `@onAnyCreate`

A shout that is sent to all bots when a bot is created. Sent immediately after <TagLink tag='@onCreate'/> is sent.

#### Arguments:
```typescript
let that: {
  bot: Bot
};
```

### `@onAnyBotClicked`

A shout that is sent to all bots when a bot is clicked.

#### Arguments:
```typescript
let that: {
  bot: Bot,
  face: 'left' | 'right' | 'front' | 'back' | 'top' | 'bottom',
  dimension: string
};
```

### `@onChat`

A shout that is sent to all bots when the player sends a chat message.
Chat messages can be sent when the player presses the Enter key while writing a message or by clicking/tapping the "Send Message" button to the right of the chat bar.

#### Arguments:
```typescript
let that: {
  message: string
};
```

### `@onChatTyping`

A shout that is sent to all bots when the player changes the text in the chat bar.
Only triggered when the chat bar is visible.

#### Arguments:
```typescript
let that: {
  message: string
};
```

### `@onFileUpload`

A shout that is sent to all bots when the user drags a file into the window.

#### Arguments:
```typescript
let that: {
  file: {
    // The name of the file. Includes the file extension.
    name: string;

    // The size of the file in bytes.
    size: number;

    // The data in the file.
    // If the file is a text file, the data will be a string.
    // If the file is not a text file, then the data will be an ArrayBuffer.
    //
    // Text files have one of the following extensions:
    // .txt
    // .json
    // .md
    // .aux
    // .html
    // .js
    // .ts
    // All the other file extensions map to an ArrayBuffer
    data: string | ArrayBuffer;
  }
};
```

### `@onGridClick`

A shout that is sent to all bots when the user clicks on empty space.

#### Arguments:
```typescript
let that: {
  position: {
    x: number,
    y: number
  },
  dimension: string
};
```

### `@onGridDown`

A shout that is sent to all bots when the user starts clicking on empty space.

#### Arguments:
```typescript
let that: {
  position: {
    x: number,
    y: number
  },
  dimension: string
};
```

### `@onGridUp`

A shout that is sent to all bots when the user stops clicking on empty space.

#### Arguments:
```typescript
let that: {
  position: {
    x: number,
    y: number
  },
  dimension: string
};
```

### `@onPlayerPortalChanged`

A shout that is sent to all bots when a portal changes on the player.

#### Arguments:
```typescript
let that: {
  portal: string;
  dimension: string;
};
```

### `@onBarcodeScanned`

A shout that is sent to all bots when the player scans a barcode.

#### Arguments:
```typescript
let that: string;
```

### `@onBarcodeScannerOpened`

A shout that is sent to all bots when the barcode scanner is opened.

### `@onBarcodeScannerClosed`

A shout that is sent to all bots when the barcode scanner is closed.

### `@onQRCodeScanned`

A shout that is sent to all bots when a QR Code is scanned.

#### Arguments:
```typescript
let that: string;
```

### `@onQRCodeScannerOpened`

A shout that is sent to all bots when the QR Code Scanner is opened.

### `@onQRCodeScannerClosed`

A shout that is sent to all bots when the QR Code Scanner is closed.

### `@onTapCode`

A shout that is sent to all bots whenever a 4-digit tap code is entered.

#### Arguments:
```typescript
let that: string;
```

### `@onKeyDown`

A shout that is sent to all bots whenever the user starts pressing a key.

#### Arguments:
```typescript
let that: {
  keys: string[]
};
```

### `@onKeyUp`

A shout that is sent to all bots whenever the user stops pressing a key.

#### Arguments:
```typescript
let that: {
  keys: string[]
};
```

### `@onStorySubscribed`

A shout that is sent when a story is loaded.
Sent to every story that is loaded.

#### Arguments:
```typescript
let that: {
  story: string
};
```

### `@onStoryUnsubscribed`

A shout that is sent when a story is unloaded.
Sent to every story that is loaded.

#### Arguments:
```typescript
let that: {
  story: string
};
```

### `@onStoryStreaming`

A shout that is sent when a story is connected and fully synced.
Sent to every story that is loaded.

#### Arguments:
```typescript
let that: {
  story: string
};
```

### `@onStoryStreamLost`

A shout that is sent when a story has been temporarily disconnected from the server.
Sent to every story that is loaded.

#### Arguments:
```typescript
let that: {
  story: string
};
```

### `@onCheckout`

A shout that is sent when the user submits their credit card info to purchase something.

#### Arguments:
```typescript
let that: {
  token: string, 
  productId: string, 
  user: { 
    username: string, 
    device: string, 
    token: string
  }
};
```

### `@onPaste`

A shout that is sent when some text is pasted into the story.

This happens by pressing <kbd>Ctrl</kbd>+<kbd>V</kbd> or <kbd>Cmd</kbd>+<kbd>V</kbd> while something is in your clipboard.

#### Arguments:
```typescript
let that: {
  text: string;
};
```

### `@onPaymentSuccessful`

A shout that is sent when payment has been approved for a checkout.

#### Arguments:
```typescript
let that: {
  /**
   * The bot that was created for the transaction.
   */
  bot: Bot,
  charge: any,
  extra: any
};
```

### `@onPaymentFailed`

A shout that is sent when payment has been rejected for a checkout.

#### Arguments:
```typescript
let that: {
  /**
   * The bot that was created for the transaction.
   */
  bot: Bot,
  error: any,
  extra: any
};
```

### `@onAnyBotDrag`

A shout that is sent whenever a bot starts to be dragged.

#### Arguments:
```typescript
let that: {
  bot: Bot,
  face: 'left' | 'right' | 'front' | 'back' | 'top' | 'bottom',
  from: {
    x: number,
    y: number,
    dimension: string
  }
};
```

### `@onAnyBotDrop`

A shout that is sent whenever a bot is dropped after being dragged.

#### Arguments:
```typescript
let that: {
  bot: Bot,
  to: {
    x: number,
    y: number,
    dimension: string
  },
  from: {
    x: number,
    y: number,
    dimension: string
  }
};
```

### `@onAnyListen`

A shout that is sent whenever a whisper or shout is issued.

#### Arguments:
```typescript
let that: {
  name: string,
  that: any,
  targets: Bot[],
  listeners: Bot[],
  responses: any[]
};
```

### `@onAnyMaxLODEnter`

A shout that is sent whenever a bot enters its maximum Level-Of-Detail.

Only sent for bots that have one of <TagLink tag='@onMaxLODEnter'/>,  <TagLink tag='@onMaxLODExit'/>, <TagLink tag='@onMinLODEnter'/>, <TagLink tag='@onMinLODExit'/>, <TagLink tag='auxMaxLODThreshold'/> or <TagLink tag='auxMinLODThreshold'/> specified.

#### Arguments:
```typescript
let that: {
  bot: Bot,
  dimension: string
};
```

### `@onAnyMinLODEnter`

A shout that is sent whenever a bot enters its minimum Level-Of-Detail.

Only sent for bots that have one of <TagLink tag='@onMaxLODEnter'/>, <TagLink tag='@onMaxLODExit'/>, <TagLink tag='@onMinLODEnter'/>, <TagLink tag='@onMinLODExit'/>, <TagLink tag='auxMaxLODThreshold'/> or <TagLink tag='auxMinLODThreshold'/> specified.

#### Arguments:
```typescript
let that: {
  bot: Bot,
  dimension: string
};
```

### `@onAnyMaxLODExit`

A shout that is sent whenever a bot exits its maximum Level-Of-Detail.

Only sent for bots that have one of <TagLink tag='@onMaxLODEnter'/>, <TagLink tag='@onMaxLODExit'/>, <TagLink tag='@onMinLODEnter'/>, <TagLink tag='@onMinLODExit'/>, <TagLink tag='auxMaxLODThreshold'/> or <TagLink tag='auxMinLODThreshold'/> specified.

#### Arguments:
```typescript
let that: {
  bot: Bot,
  dimension: string
};
```

### `@onAnyMinLODExit`

A shout that is sent whenever a bot exits its minimum Level-Of-Detail.

Only sent for bots that have one of <TagLink tag='@onMaxLODEnter'/>, <TagLink tag='@onMaxLODExit'/>, <TagLink tag='@onMinLODEnter'/>, <TagLink tag='@onMinLODExit'/>, <TagLink tag='auxMaxLODThreshold'/> or <TagLink tag='auxMinLODThreshold'/> specified.

#### Arguments:
```typescript
let that: {
  bot: Bot,
  dimension: string
};
```

### `@onAnyFocusEnter`

A shout that is sent whenever a bot starts being focused by the player.

Focus is when the bot is in the center of the screen.

Only sent if <TagLink tag='auxFocusable'/> is true.

#### Arguments:
```typescript
let that: {
  bot: Bot,
  dimension: string
};
```

### `@onAnyFocusExit`

A shout that is sent whenever a bot stops being focused by the player.

Focus is when the bot is in the center of the screen.

#### Arguments:
```typescript
let that: {
  bot: Bot,
  dimension: string
};
```

### `@onWebhook`

A shout that is sent whenever a webhook is received.

#### Arguments:
```typescript
let that: {
  method: string,
  url: string,
  data: any,
  headers: any
};
```

### `@onStoryAction`

A shout that is sent whenever an action happens.

#### Arguments:
```typescript
let that: {
  action: any
};
```